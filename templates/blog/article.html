{% extends "base.html" %}

{% block title %}{{ post.title }}{% endblock %}

{% block meta_tags %}
<!-- SEO Meta Tags -->
<meta name="description" content="{{ post.description or post.excerpt or '' }}">
<meta name="keywords" content="{{ ', '.join(post.tags) if post.tags else post.category or 'resume, career' }}">
<meta name="author" content="{{ post.author_byline }}">

<!-- Open Graph Meta Tags -->
<meta property="og:title" content="{{ post.title }}">
<meta property="og:description" content="{{ post.description or post.excerpt or '' }}">
<meta property="og:type" content="article">
<meta property="og:url" content="https://story.cv/blog/articles/{{ post.slug }}">
<meta property="og:site_name" content="StoryCV">
{% if post.featured_image %}
<meta property="og:image" content="https://story.cv{{ post.featured_image }}">
{% endif %}
<meta property="article:published_time" content="{{ post.published_at.isoformat() if post.published_at else '' }}">
<meta property="article:author" content="{{ post.author_byline }}">
<meta property="article:section" content="{{ post.category or 'General' }}">

<!-- Twitter Meta Tags -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{ post.title }}">
<meta name="twitter:description" content="{{ post.description or post.excerpt or '' }}">
{% if post.featured_image %}
<meta name="twitter:image" content="https://story.cv{{ post.featured_image }}">
{% endif %}
{% endblock %}

{% block canonical %}
<link rel="canonical" href="https://story.cv/blog/articles/{{ post.slug }}">
{% endblock %}

{% block structured_data %}
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "headline": "{{ post.title }}",
    "description": "{{ post.description or post.excerpt or '' }}",
    {% if post.featured_image %}
    "image": "https://story.cv{{ post.featured_image }}",
    {% endif %}
    "author": {
        "@type": "Person",
        "name": "{{ post.author_byline }}"
    },
    "publisher": {
        "@type": "Organization",
        "name": "StoryCV",
        "url": "https://story.cv"
    },
    "datePublished": "{{ post.published_at.strftime('%Y-%m-%d') if post.published_at else '' }}",
    "dateModified": "{{ post.updated_at.strftime('%Y-%m-%d') if post.updated_at else '' }}",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://story.cv/blog/articles/{{ post.slug }}"
    }
}
</script>
{% endblock %}

{% block content %}
<!-- Blog Post Header -->
<section class="blog-post-header">
    <div class="container">
        <div class="blog-post-meta">
            <a href="/blog" class="back-to-blog">← Back to Blog</a>
            <div class="post-categories">
                <span class="post-category">{{ post.category or 'General' }}</span>
            </div>
        </div>
        <h1 class="blog-post-title">{{ post.title }}</h1>
        <div class="blog-post-info">
            <span class="post-date">{{ post.published_at.strftime('%B %d, %Y') if post.published_at else '' }}</span>
            <span class="post-read-time">{{ post.read_time_minutes }} min read</span>
            <span class="post-author">By {{ post.author_byline }}</span>
        </div>
    </div>
</section>

{% if post.featured_image %}
<!-- Featured Image -->
<section class="blog-post-image">
    <div class="container">
        <img src="{{ post.featured_image }}" alt="{{ post.image_alt or post.title }}" class="post-featured-image">
    </div>
</section>
{% endif %}

<!-- Blog Post Content -->
<article class="blog-post-content">
    <div class="container">
        <div class="blog-post-body">
            {{ post.html_body | safe }}
        </div>

        <!-- START: Product Hunt Launch Embed (Remove after launch campaign) -->
        <div class="ph-embed-container" style="margin: 40px 0; display: flex; justify-content: center;">
            <div style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; border: 1px solid rgb(224, 224, 224); border-radius: 12px; padding: 20px; max-width: 500px; background: rgb(255, 255, 255); box-shadow: rgba(0, 0, 0, 0.05) 0px 2px 8px;">
                <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                    <img alt="StoryCV" src="https://ph-files.imgix.net/e608faf2-b87e-4fce-9511-a52a99a76e33.png?auto=format&amp;fit=crop&amp;w=80&amp;h=80" style="width: 64px; height: 64px; border-radius: 8px; object-fit: cover; flex-shrink: 0;">
                    <div style="flex: 1 1 0%; min-width: 0px;">
                        <h3 style="margin: 0px; font-size: 18px; font-weight: 600; color: rgb(26, 26, 26); line-height: 1.3; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">StoryCV</h3>
                        <p style="margin: 4px 0px 0px; font-size: 14px; color: rgb(102, 102, 102); line-height: 1.4; overflow: hidden; text-overflow: ellipsis; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;">Build your resume by talking. We'll handle the writing.</p>
                    </div>
                </div>
                <a href="https://www.producthunt.com/products/storycv?embed=true&amp;utm_source=embed&amp;utm_medium=post_embed" target="_blank" rel="noopener" style="display: inline-flex; align-items: center; gap: 4px; margin-top: 12px; padding: 8px 16px; background: rgb(255, 97, 84); color: rgb(255, 255, 255); text-decoration: none; border-radius: 8px; font-size: 14px; font-weight: 600;">Check it out on Product Hunt →</a>
            </div>
        </div>
        <!-- END: Product Hunt Launch Embed -->

        {% if related_posts %}
        <!-- Related Posts -->
        <section class="related-posts-section">
            <h3>Related Articles</h3>
            <div class="related-posts-grid">
                {% for related in related_posts %}
                <a href="/blog/articles/{{ related.slug }}" class="related-post-card">
                    {% if related.featured_image %}
                    <div class="related-post-image">
                        <img src="{{ related.featured_image }}" alt="{{ related.image_alt or related.title }}" loading="lazy">
                    </div>
                    {% endif %}
                    <div class="related-post-content">
                        <span class="related-post-category">{{ related.category or 'General' }}</span>
                        <h4 class="related-post-title">{{ related.title }}</h4>
                        <span class="related-post-read-time">{{ related.read_time_minutes }} min read</span>
                    </div>
                </a>
                {% endfor %}
            </div>
        </section>
        {% endif %}
    </div>
</article>
{% endblock %}
